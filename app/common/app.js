/**
 * Sixcious
 * @copyright (c) 2020 Sixcious
 * @license https://sixcious.com/LICENSE
 */
class App{static APP_VIEWS=["url-incrementer","infy-scroll","downloadyze","elempick","url-increment-button","url-decrement-button"];static SITE_VIEWS=["default","about","help","privacy-policy","feedback","special","404"];static ALL_VIEWS=App.SITE_VIEWS.concat(App.APP_VIEWS);static async init(){App.router(),App.prepareItems(),await App.prepareMessages(),UI.prepare(V.DOM,V.items,"feedback"===V.path),App.addEventListeners(),App.updateStaticElements("all")}static router(){const e=window.location.pathname.split("/");V.app=App.APP_VIEWS.includes(e[1])?e[1]:"",V.path=App.ALL_VIEWS.includes(e[e.length-1])?e[e.length-1]:e[e.length-1]?"404":"default"}static pushState(e,t){window.history.pushState(void 0,void 0,t||new URL(window.location.href).origin+"/"+e)}static popState(){App.router(),App.changeView(void 0,"init")}static prepareItems(){V.items.theme=App.storageGet("theme")||"system",V.items.drawer=App.storageGet("drawer")||"closed"}static async prepareMessages(){try{const e="/-locales/en/messages.json",t=await fetch(e);V.messages=await t.json()}catch(e){}}static addEventListeners(){window.addEventListener("popstate",App.popState),window.addEventListener("click",App.clickListener),V.DOM["#drawer-button-2"].addEventListener("click",App.clickDrawer),V.DOM["#drawer-list"].addEventListener("click",App.changeView),V.DOM["#theme-button"].addEventListener("click",App.changeTheme)}static updateStaticElements(e){"all"!==e&&"theme"!==e&&"language"!==e||(V.DOM["#theme-icon"].children[0].setAttribute("href","/lib/feather/feather.svg#"+("light"===V.items.theme?"sun":"dark"===V.items.theme?"moon":"sun-moon")),Tooltip.updateTooltip(V.DOM["#theme-button"],Util.i18nGetMessage("theme_button_tooltip",["theme",Util.i18nGetMessage("theme_"+V.items.theme+"_label")]),!0)),"all"===e&&("opened"===V.items.drawer&&App.clickDrawer(),App.changeView(void 0,"all"===e?"init":"theme"))}static clickDrawer(){const e=MDC.drawers.get("app-drawer"),t=!!e.open;e.open?e.foundation_.close():e.foundation_.open(),V.items.drawer=t?"closed":"opened",App.storageSet("drawer",V.items.drawer)}static changeView(e,t){let a;if(void 0===e||t)a=App.ALL_VIEWS.includes(V.path)?V.path:"default";else{const e=MDC.lists.get("drawer-list");a=e.listElements[e.selectedIndex].dataset.value,App.pushState(a)}for(const e of App.ALL_VIEWS)V.DOM["#"+e].dataset.display=a===e?"":"none";"init"===t&&App.APP_VIEWS.includes(a)&&(MDC.lists.get("drawer-list").selectedIndex=App.APP_VIEWS.indexOf(a));const i=Util.i18nGetMessage(a);if(document.title="Sixcious"+(i&&"default"!==a?" - "+i:""),"feedback"===a&&V.app){let e;switch(V.app){case"url-incrementer":e="1FAIpQLSfLqFzX91oQ1u78Awy8ZmvVbnLzNbyfL4tjVvJ2bVK4kzAjNw";break;case"infy-scroll":e="1FAIpQLScoI1Snl_c3X0MMJ4e8u1jwCMca9J6mqjgI-Sqg1NgiP7a28w";break;case"downloadyze":e="1FAIpQLSfXuOhvMwwhtSdGd0HfW94vNH1AMRbRKm1SQqxoJyM4U7DZ-Q";break;case"elempick":e="1FAIpQLSfxq6dHzTQ-TdM0RVjrPN7tx7goiDtIos-fvWxxQJiRX3QGsw";break;case"url-increment-button":e="1FAIpQLScP2dByxTEyiMEvQYdaRU2bw-ecvmF3wWYkcYPLr-npHls_cg";break;case"url-decrement-button":e="1FAIpQLScYIDwkE2jN0EEcL0B4aEGk6NCN5NNOVWu_ipdsKKL8LO4ntw"}e&&(window.location="https://docs.google.com/forms/d/e/"+e+"/viewform")}else"special"===a&&V.app&&(document.querySelector("#special > h6").textContent=Util.i18nGetMessage(V.app)+" "+Util.i18nGetMessage(a));void 0===e&&"click"!==t||window.scroll({top:0,left:0,behavior:"smooth"})}static changeTheme(){V.items.theme="system"===V.items.theme?"light":"light"===V.items.theme?"dark":"system",document.documentElement.dataset.theme=V.items.theme,App.updateStaticElements("theme"),App.storageSet("theme",V.items.theme)}static clickListener=e=>{const t=e.target.closest("a");if(t instanceof HTMLAnchorElement&&new URL(t.href).origin===window.location.origin)return e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault(),App.pushState(void 0,t.href),App.router(),App.changeView(void 0,"click"),!1};static storageGet(e){let t;try{t=sessionStorage.getItem(e)}catch(e){}return t}static storageSet(e,t){try{sessionStorage.setItem(e,t)}catch(e){}}}App.init();