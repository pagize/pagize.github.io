/**
 * Tooltip
 * @copyright (c) 2020 Sixcious
 * @license https://github.com/sixcious/shr/blob/main/LICENSE
 */
class Tooltip{static anchor;static tooltip;static content;static arrow;static showDelay=300;static hideDelay=100;static selector="[data-tooltip],[data-tooltip-without-underline]";static placement="top";static offset=10;static shift=5;static controller;static addTooltips(){Tooltip.controller=new AbortController;const t=document.querySelectorAll(Tooltip.selector);for(const o of t)Tooltip.addTooltip(o);document.querySelector("#tooltip")?.remove(),Tooltip.tooltip=document.createElement("div"),Tooltip.tooltip.id="tooltip",Tooltip.tooltip.role="tooltip",Tooltip.arrow=document.createElement("div"),Tooltip.arrow.id="tooltip-arrow",Tooltip.content=document.createElement("div"),Tooltip.content.id="tooltip-content",Tooltip.tooltip.appendChild(Tooltip.content),Tooltip.tooltip.appendChild(Tooltip.arrow),document.body.appendChild(Tooltip.tooltip)}static addTooltip(t){const o=t.getAttribute("data-tooltip")||t.getAttribute("data-tooltip-without-underline");t.setAttribute("aria-label",Util.i18nGetMessage(o)),t.setAttribute("aria-describedby","tooltip"),t.classList.add("tooltip"),t.hasAttribute("data-tooltip-without-underline")&&t.classList.add("tooltip-without-underline"),t.addEventListener("mouseenter",Tooltip.showTooltip,{signal:Tooltip.controller.signal}),t.addEventListener("mouseleave",Tooltip.hideTooltip,{signal:Tooltip.controller.signal}),t.addEventListener("focus",Tooltip.showTooltip,{signal:Tooltip.controller.signal}),t.addEventListener("blur",Tooltip.hideTooltip,{signal:Tooltip.controller.signal})}static removeTooltips(){Tooltip.controller?.abort();const t=document.querySelectorAll(Tooltip.selector);for(const o of t)Tooltip.removeTooltip(o);Tooltip.tooltip?.remove()}static removeTooltip(t){t.classList.remove("tooltip","tooltip-without-underline"),t.removeAttribute("aria-describedby"),t.removeAttribute("aria-label")}static updateTooltip(t,o,i=!1){t&&(t.setAttribute("aria-label",o),i&&Tooltip.showTooltip({target:t},!1))}static showTooltip(t,o=!0){Tooltip.anchor=t?.target,setTimeout(()=>{Tooltip.anchor.matches(":hover")&&(Tooltip.tooltip.children[0].style.whiteSpace=Tooltip.anchor.getAttribute("aria-label").includes("\r\n")?"pre":"",Tooltip.tooltip.style.maxWidth=Tooltip.anchor.dataset.tooltipWidth||"",Tooltip.content.textContent=Tooltip.anchor.getAttribute("aria-label"),Tooltip.tooltip.classList.add("show"),FloatingUIDOM.computePosition(Tooltip.anchor,Tooltip.tooltip,{placement:Tooltip.anchor.dataset.tooltipPlacement||Tooltip.placement,middleware:[FloatingUICore.offset(Tooltip.offset),FloatingUIDOM.flip(),FloatingUIDOM.shift({padding:Tooltip.shift}),FloatingUIDOM.arrow({element:Tooltip.arrow})]}).then(({x:t,y:o,placement:i,middlewareData:l})=>{Object.assign(Tooltip.tooltip.style,{left:`${t}px`,top:`${o}px`});const{x:e,y:a}=l.arrow,p={top:"bottom",right:"left",bottom:"top",left:"right"}[i.split("-")[0]];Object.assign(Tooltip.arrow.style,{left:null!=e?`${e}px`:"",top:null!=a?`${a}px`:"",right:"",bottom:"",[p]:"-4px"})}))},o?Tooltip.showDelay:0)}static hideTooltip(t,o=!0){setTimeout(()=>{Tooltip.tooltip.classList.remove("show")},o?Tooltip.hideDelay:0)}}